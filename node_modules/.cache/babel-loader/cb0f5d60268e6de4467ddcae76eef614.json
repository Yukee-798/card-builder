{"ast":null,"code":"\"use strict\";\n/* IMPORT */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* VARIABLES */\n\nconst Queues = {};\n/* SCHEDULER */\n//TODO: Maybe publish this as a standalone package\n\nconst Scheduler = {\n  next: id => {\n    const queue = Queues[id];\n    if (!queue) return;\n    queue.shift();\n    const job = queue[0];\n\n    if (job) {\n      job(() => Scheduler.next(id));\n    } else {\n      delete Queues[id];\n    }\n  },\n  schedule: id => {\n    return new Promise(resolve => {\n      let queue = Queues[id];\n      if (!queue) queue = Queues[id] = [];\n      queue.push(resolve);\n      if (queue.length > 1) return;\n      resolve(() => Scheduler.next(id));\n    });\n  }\n};\n/* EXPORT */\n\nexports.default = Scheduler;","map":null,"metadata":{},"sourceType":"script"}